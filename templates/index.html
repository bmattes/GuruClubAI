<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Guru Club Meeting - Agent Selection</title>
  <style>
    /* Basic Reset */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: sans-serif;
      background-color: #f8f8f8;
      padding: 20px;
    }
    #selection-container {
      max-width: 800px;
      margin: 0 auto;
      text-align: center;
    }
    header h1 {
      font-size: 1.8em;
      color: #0070c9;
      margin-bottom: 20px;
    }
    /* Agent selection grid */
    #agent-selection-container {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-bottom: 20px;
    }
    .agent-card {
      background-color: #fff;
      border: 1px solid #ccc;
      border-radius: 4px;
      padding: 10px;
      width: calc(33.33% - 20px);
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .agent-card img {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      margin-bottom: 5px;
    }
    .agent-card p {
      font-size: 0.9em;
      color: #555;
      margin-bottom: 5px;
    }
    .agent-card label {
      font-size: 0.9em;
      cursor: pointer;
    }
    /* Responsive: Stack cards vertically on small screens */
    @media (max-width: 600px) {
      .agent-card {
        width: 90%;
      }
    }
    button {
      padding: 10px 20px;
      background-color: #0070c9;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 1em;
      width: 100%;
    }
  </style>
</head>
<body>
  <div id="selection-container">
    <header>
      <h1>Guru Club Meeting</h1>
    </header>
    <p>Select the agents you'd like to talk to:</p>
    <div id="agent-selection-container"></div>
    <button id="startMeetingBtn">Start Meeting</button>
  </div>
  
  <script>
    // List of available agents with bios
    const availableAgents = [
      { name: "Sophia", avatar: "static/images/agents/sophia.png", bio: "A scholarly book critic with a refined analytical perspective." },
      { name: "Rex", avatar: "static/images/agents/rex.png", bio: "A contrarian with a humorous twist, quick with slang and punchlines." },
      { name: "Ella", avatar: "static/images/agents/ella.png", bio: "Warm, optimistic, and always ready with a thoughtful observation." },
      { name: "Maxine", avatar: "static/images/agents/maxine.png", bio: "A vibrant creative spirit who loves art and imaginative commentary." },
      { name: "Orion", avatar: "static/images/agents/orion.png", bio: "An adventurer at heart, always eager to explore and challenge norms." },
      { name: "Luna", avatar: "static/images/agents/luna.png", bio: "A reflective soul with a mystical outlook on life." },
      { name: "Jasper", avatar: "static/images/agents/jasper.png", bio: "A playful wit who adds humor and levity to every conversation." },
      { name: "Violet", avatar: "static/images/agents/violet.png", bio: "Elegant, poised, and culturedâ€”always bringing sophistication to the table." },
      { name: "Kai", avatar: "static/images/agents/kai.png", bio: "A modern innovator with boundless energy and a tech-forward outlook." },
      { name: "Nova", avatar: "static/images/agents/nova.png", bio: "An enigmatic thinker who offers deep, philosophical reflections." }
    ];

    // Populate agent selection UI.
    function populateAgentSelection() {
      const container = document.getElementById("agent-selection-container");
      container.innerHTML = "";
      availableAgents.forEach(agent => {
        const card = document.createElement("div");
        card.className = "agent-card";
        card.innerHTML = `
          <img src="${agent.avatar}" alt="${agent.name}" />
          <strong>${agent.name}</strong>
          <p>${agent.bio}</p>
          <label><input type="checkbox" value="${agent.name}"> Select</label>
        `;
        container.appendChild(card);
      });
    }

    populateAgentSelection();

    // When "Start Meeting" is clicked, store the selected agents and redirect.
    document.getElementById("startMeetingBtn").addEventListener("click", () => {
      const checkboxes = document.querySelectorAll("#agent-selection-container input[type=checkbox]");
      const selectedAgents = Array.from(checkboxes).filter(cb => cb.checked).map(cb => cb.value);
      if (selectedAgents.length === 0) {
        alert("Please select at least one agent.");
        return;
      }
      // Save selected agents to localStorage.
      localStorage.setItem("selectedAgents", JSON.stringify(selectedAgents));
      // Redirect to the meeting page.
      window.location.href = "/meeting";
    });
  </script>
</body>
</html>